------------
  已知: 地图、30个动作、30个观测
  未知：机器人每一步的真实位置
  求解：用 Bayes Filter 推断每一步的位置概率分布

------------
  把 20x20 的网格展平成一个长度 400 的向量，每个状态对应一个格子。
  belief 向量: b ∈ R^400,  b(x) = P(机器人在格子 x)

------------
    转移矩阵 T（运动模型）
    T 是 400×400 的矩阵，依赖于当前动作 a：
    T(x', x) = P(x' | x, a)
    即从状态 x 转移到状态 x' 的概率。对本题：
    ┌───────────────┬───────────────────────────────┐
    │ T(x', x) 的值 │             条件              │
    ├───────────────┼───────────────────────────────┤
    │ 0.9           │ x' 是 x 沿动作 a 的目标格子   │
    ├───────────────┼───────────────────────────────┤
    │ 0.1           │ x' = x（原地不动）            │
    ├───────────────┼───────────────────────────────┤
    │ 1.0           │ x' = x 且动作 a 会导致 x 出界 │
    ├───────────────┼───────────────────────────────┤
    │ 0             │ 其他                          │
    └───────────────┴───────────────────────────────┘
    每一列的和为 1（从任何状态出发，概率守恒）。

 -----------
    观测矩阵 M（传感器模型）
    M 是一个 400×400 的对角矩阵，依赖于当前观测 z：
    M = diag( P(z | x) )    对角线上第 x 个元素为 P(z | x)
    ┌──────────────┬──────────────┐
    │ M(x, x) 的值 │     条件     │
    ├──────────────┼──────────────┤
    │ 0.9          │ cmap(x) == z │
    ├──────────────┼──────────────┤
    │ 0.1          │ cmap(x) != z │
    └──────────────┴──────────────┘

 ---
  两步更新（矩阵形式）
  Prediction:   b_bar = T · b          （转移矩阵左乘 belief）
  Update:       b_new = η · M · b_bar  （观测矩阵左乘，再归一化）
  合并写成一步：
  b_new = η · M · T · b


  ----------
  运行结果
    ⎿  belief_states:
      [[19 19]
      [19 16]
      [14 19]
      [ 7  7]
      [ 6  7]
      [ 5  7]
      [ 3  6]
      [ 3  5]
      [ 4  5]
      [ 5  5]
      [ 6  5]
      [ 6  6]
      [ 6  6]
      [ 5  6]
      [ 3  2]
      [ 4  2]
      [ 4  2]
      [ 6  6]
      [ 6  7]
      [ 6  6]
      [ 6  7]
      [ 4  3]
      [ 5  3]
      [ 6  3]
      [ 5  3]
      [ 5  4]
      [ 5  5]
      [ 5  6]
      [ 5  5]
      [ 5  6]]
     belief_states shape: (30, 2)
     cmap:
      [[1 0 1 0 1 1 1 1 1 1 1 1 0 0 1 0 1 0 1 0]
      [0 1 0 0 1 1 0 1 0 1 1 1 1 0 1 1 0 1 1 0]
      [1 0 0 0 0 1 1 0 1 0 0 1 0 0 1 0 1 1 1 1]
      [1 0 0 0 1 1 1 1 0 1 1 1 1 1 0 0 0 0 0 0]
      [1 1 0 0 1 1 1 1 0 1 1 1 0 0 0 1 1 0 1 1]
      [1 1 1 0 0 1 1 1 0 1 0 0 1 1 0 0 1 1 1 0]
      [0 0 0 1 1 1 1 1 0 0 0 0 0 0 0 1 0 1 0 1]
      [1 0 1 0 0 1 1 0 0 1 1 0 1 1 1 1 1 1 0 0]
      [0 1 0 1 1 0 1 1 0 0 1 1 0 0 0 1 1 1 1 0]
      [1 0 0 0 1 0 0 1 1 1 0 1 1 1 0 0 0 1 0 1]
      [1 0 0 0 1 1 0 0 1 1 0 1 0 1 1 0 0 1 1 1]
      [1 1 0 0 0 0 0 1 0 1 1 1 1 1 1 0 0 0 0 0]
      [1 0 0 0 0 0 0 1 1 0 0 1 0 0 0 0 1 1 1 1]
      [1 1 0 0 0 1 0 0 0 1 0 0 0 1 1 1 0 1 1 1]
      [1 0 1 0 0 1 0 0 1 0 0 1 0 1 0 1 1 1 1 0]
      [1 1 1 1 0 1 1 0 1 1 0 0 1 1 0 1 1 1 1 1]
      [1 1 0 1 1 1 1 0 1 1 0 0 0 0 1 0 1 0 1 0]
      [0 1 1 1 0 1 0 0 0 1 0 0 0 1 0 1 1 1 1 0]
      [0 0 0 1 0 0 0 0 0 1 1 0 0 0 0 1 1 1 0 1]
      [0 0 0 1 0 0 0 1 0 1 1 1 1 0 0 0 0 0 1 0]]
     cmap shape: (20, 20)
     actions:
      [[ 1  0]
      [ 1  0]
      [ 1  0]
      [ 0 -1]
      [-1  0]
      [-1  0]
      [ 0  1]
      [ 0 -1]
      [ 1  0]
      [ 1  0]
      [ 1  0]
      [ 0  1]
      [ 0 -1]
      [-1  0]
      [ 0  1]
      [ 1  0]
      [ 0  1]
      [ 0 -1]
      [ 0  1]
      [ 0 -1]
      [ 0  1]
      [ 0  1]
      [ 1  0]
      [ 1  0]
      [-1  0]
      [ 0  1]
      [ 0  1]
      [ 0  1]
      [ 0 -1]
      [ 0  1]]
     observations: [0 0 1 1 0 0 0 0 0 1 0 0 0 1 1 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1]
 
   ⎿  Step | GT (r, c) | Est_direct | match
     --------------------------------------------------
        0 | (19,19)   | (19, 0)      | no
        1 | (19,16)   | (19, 8)      | no
        2 | (14,19)   | ( 3, 0)      | no
        3 | ( 7, 7)   | ( 3, 0)      | no
        4 | ( 6, 7)   | ( 2, 0)      | no
        5 | ( 5, 7)   | ( 1, 0)      | no
        6 | ( 3, 6)   | ( 1, 1)      | no
        7 | ( 3, 5)   | ( 1, 0)      | no
        8 | ( 4, 5)   | ( 2, 0)      | no
        9 | ( 5, 5)   | ( 3, 0)      | no
       10 | ( 6, 5)   | ( 4, 0)      | no
       11 | ( 6, 6)   | ( 4, 1)      | no
       12 | ( 6, 6)   | ( 4, 0)      | no
       13 | ( 5, 6)   | ( 3, 0)      | no
       14 | ( 3, 2)   | ( 3, 1)      | no
       15 | ( 4, 2)   | ( 4, 1)      | no
       16 | ( 4, 2)   | ( 4, 2)      | YES
       17 | ( 6, 6)   | ( 4, 1)      | no
       18 | ( 6, 7)   | ( 4, 2)      | no
       19 | ( 6, 6)   | ( 4, 1)      | no
       20 | ( 6, 7)   | ( 4, 2)      | no
       21 | ( 4, 3)   | ( 4, 3)      | YES
       22 | ( 5, 3)   | ( 5, 3)      | YES
       23 | ( 6, 3)   | ( 6, 3)      | YES
       24 | ( 5, 3)   | ( 5, 3)      | YES
       25 | ( 5, 4)   | ( 5, 4)      | YES
       26 | ( 5, 5)   | ( 5, 5)      | YES
       27 | ( 5, 6)   | ( 5, 6)      | YES
       28 | ( 5, 5)   | ( 5, 5)      | YES
       29 | ( 5, 6)   | ( 5, 6)      | YES


     ----------------
      可视化已生成，文件保存在 data/belief_heatmap.png。图中：                                                                                           
                        
  - 热力图背景 — belief 概率分布，亮色（黄/橙）表示高概率区域 
  - 青色圆点 (cyan) — Ground Truth，机器人的真实位置                                                                                         - 青色圆点 (cyan) — Ground Truth，机器人的真实位置
  - 绿色三角 (lime) — Estimate，filter 估计的位置（belief 概率最大的格子）                                                                           
  
  从图中可以看到：
  - Step 0-2：belief 分布很分散（初始均匀分布），估计位置偏差大
  - Step 5 之后：belief 逐渐收敛，概率集中到少数几个格子
  - 后期步骤：估计位置（绿三角）和真实位置（青圆点）仍有不少偏差，说明 filter 可能还需要调优
